angular.module("angularParseInterface",["ngResource"]),angular.module("angularParseInterface").factory("ParseAppEventBus",["$rootScope",function(a){"use strict";var b=function(){this._$scope=a.$new(!0)};return b.prototype.on=function(a,b){this._$scope.$on(a,b)},b.prototype.emit=function(){var a=this._$scope;a.$emit.apply(a,arguments)},b}]),angular.module("angularParseInterface").value("SIGN_IN","signin").value("SIGN_OUT","signout"),angular.module("angularParseInterface").factory("parseInterface",["ParseAppEventBus","parseResource","parseObjectFactory","parseUser","parseQueryBuilder",function(a,b,c,d,e){"use strict";var f={};return f.createAppInterface=function(f,g){var h,i,j,k,l;if(!("applicationId"in f))throw new Error('appConfig must have an "applicationId" property');if(h=f.applicationId,!("restKey"in f))throw new Error('appConfig must have a "restKey" property');return g=g||{},g.parseApp=g.parseApp||{},i=g.parseApp[h]=g.parseApp[h]||{},j=new a,k=b.createAppResourceFactory(f,i,j),l={},l.objectFactory=c.createObjectFactory(k),l.User=d.createUserModel(k,i,j),l.Query=e.Query,l},f}]),angular.module("angularParseInterface").factory("parseObjectFactory",["parseResourceActions",function(a){"use strict";var b=function(a,b){a.className=b},c={};return c.createObjectFactory=function(c){return function(d){var e,f="/classes/"+d+"/:objectId",g={objectId:"@objectId"},h={get:a.get,query:a.query,save:a.save,"delete":a.delete};return e=c(f,g,h),b(e,d),e}},c}]),angular.module("angularParseInterface").factory("parseQueryBuilder",function(){"use strict";var a=function(a){return angular.isObject(a)&&!angular.isArray(a)},b=function(a,b){var c={};return angular.forEach(a,function(a,d){~b.indexOf(d)&&(c[d]=a)}),c},c=function(a,b){var c={};return angular.forEach(a,function(a,d){b.indexOf(d)<0&&(c[d]=a)}),c},d={},e=d.Query=function(a){this._Resource=a,this._params={}};return e.prototype._getConstraints=function(){return angular.copy(this._params.where)||{}},e.prototype._setConstraints=function(a){this._params.where=a},e.prototype._getFieldConstraints=function(a){var b=this._getConstraints();return angular.copy(b[a])||{}},e.prototype._setFieldConstraints=function(a,b){var c=this._getConstraints();c[a]=b,this._setConstraints(c)},e.prototype._setFieldConstraintsKey=function(d,e,f,g){var h=g.compatibleKeys,i=g.incompatibleKeys,j=this._getFieldConstraints(d);return j=a(j)?j:{},h&&(j=b(j,h)),i&&(j=c(j,i)),j[e]=f,this._setFieldConstraints(d,j),this},e.prototype.equalTo=function(a,b){return this._setFieldConstraints(a,b),this},e.prototype.notEqualTo=function(a,b){var c="$ne",d=["$all"];return this._setFieldConstraintsKey(a,c,b,{incompatibleKeys:d}),this},e.prototype.lessThan=function(a,b){var c="$lt",d=["$lte","$all"];return this._setFieldConstraintsKey(a,c,b,{incompatibleKeys:d}),this},e.prototype.lessThanOrEqualTo=function(a,b){var c="$lte",d=["$lt","$all"];return this._setFieldConstraintsKey(a,c,b,{incompatibleKeys:d}),this},e.prototype.greaterThan=function(a,b){var c="$gt",d=["$gte","$all"];return this._setFieldConstraintsKey(a,c,b,{incompatibleKeys:d}),this},e.prototype.greaterThanOrEqualTo=function(a,b){var c="$gte",d=["$gt","$all"];return this._setFieldConstraintsKey(a,c,b,{incompatibleKeys:d}),this},e.prototype.containedIn=function(a,b){var c="$in",d=["$all"];return this._setFieldConstraintsKey(a,c,b,{incompatibleKeys:d}),this},e.prototype.notContainedIn=function(a,b){var c="$nin",d=["$all"];return this._setFieldConstraintsKey(a,c,b,{incompatibleKeys:d}),this},e.prototype.exists=function(a){var b="$exists",c=!0,d=["$gt","$gte","$lt","$lte","$in","$nin","$all"];return this._setFieldConstraintsKey(a,b,c,{incompatibleKeys:d}),this},e.prototype.doesNotExist=function(a){var b="$exists",c=!1,d=[];return this._setFieldConstraintsKey(a,b,c,{compatibleKeys:d}),this},e.prototype.startsWith=function(a,b){var c="$regex",d=["$all"],e="^\\Q"+b+"\\E";return this._setFieldConstraintsKey(a,c,e,{incompatibleKeys:d}),this},e.prototype.isRelationOf=function(a,b){var c=this._getConstraints();return c.$relatedTo={object:{__type:"Pointer",className:b.className,objectId:b.objectId},key:a},this._setConstraints(c),this},e.prototype.isRelatedTo=function(a,b){var c={__type:"Pointer",className:b.className,objectId:b.objectId};return this._setFieldConstraints(a,c),this},e.prototype.contains=function(a,b){return this._setFieldConstraints(a,b),this},e.prototype.containsAll=function(a){var b="$all",c=angular.isArray(arguments[1])&&2===arguments.length?arguments[1]:[].slice.call(arguments,1),d=[];return this._setFieldConstraintsKey(a,b,c,{compatibleKeys:d}),this},e.prototype.matchesQuery=function(a,b,c){var d="$select",e=["$all"];c=c||"objectId";var f={query:b._yieldParams(),key:c};return this._setFieldConstraintsKey(a,d,f,{incompatibleKeys:e}),this},e.prototype.doesNotMatchQuery=function(a,b,c){var d="$dontSelect",e=["$all"];c=c||"objectId";var f={query:b._yieldParams(),key:c};return this._setFieldConstraintsKey(a,d,f,{incompatibleKeys:e}),this},e.or=function(a){var b=this,c=[].slice.call(arguments,1),d=new b(a),e=a.className,f=[];return angular.forEach(c,function(a){var b=a._yieldParams();b.className===e&&f.push(b.where)}),d._setConstraints({$or:f}),d},e.prototype.skip=function(a){return this._params.skip=a,this},e.prototype.limit=function(a){return this._params.limit=a,this},e.prototype.count=function(){return this._params.limit=0,this._params.count=1,this},e.prototype.select=function(){return this._params.keys=angular.isArray(arguments[0])?arguments[0]:[].slice.call(arguments),this},e.prototype.ascending=function(a){return this._params.order=this._params.order||[],this._params.order.push(a),this},e.prototype.descending=function(a){return this._params.order=this._params.order||[],this._params.order.push("-"+a),this},e.prototype.order=function(){return this._params.order=angular.isArray(arguments[0])?arguments[0]:[].slice.call(arguments),this},e.prototype._yieldParams=function(){var a=angular.copy(this._params);return a.order=a.order&&a.order.length?a.order.join(","):void 0,a.className=this._Resource.className,a},e.prototype.exec=function(){var a=this._yieldParams();return delete a.className,a.where="undefined"!=typeof a.where?JSON.stringify(a.where):void 0,this._Resource.query(a)},d}),angular.module("angularParseInterface").factory("parseUser",["parseResourceActions","SIGN_IN","SIGN_OUT",function(a,b,c){"use strict";var d={},e=function(a,d,e){a.className="_User",a._addRequestBlacklistProps("sessionToken","emailVerified"),a.signUp=function(a,c,f){var g=this.save({username:a,password:c,email:f});return g.$promise.then(function(){var a={sessionToken:g.sessionToken};delete g.sessionToken,d.emit(b,a)}),e.user=g},a.signIn=function(a,c){var f=this.get({urlSegment1:"login",username:a,password:c});return f.$promise.then(function(){var a={sessionToken:f.sessionToken};delete f.sessionToken,d.emit(b,a)}),e.user=f},a.signOut=function(){delete e.user,d.emit(c)},a.current=function(){var a=e.user;return a||(a=this.get({urlSegment2:"me"}),a.$promise.then(function(){delete a.sessionToken}),e.user=a),a}};return d.createUserModel=function(b,c,d){var f="/:urlSegment1/:urlSegment2",g={urlSegment1:"users",urlSegment2:"@objectId"},h={get:a.get,query:a.query,save:a.save,"delete":a.delete},i=b(f,g,h);return e(i,d,c),i},d}]),angular.module("angularParseInterface").factory("parseDataCodecs",function(){"use strict";var a=function(a){var b,c,d,e;if(b=arguments[1]instanceof Array?arguments[1]:[].slice.call(arguments,1),null===a||"object"!=typeof a)return!1;for(c=0,d=b.length;d>c;c++)if(!a.hasOwnProperty(b[c]))return!1;for(e in a)if(a.hasOwnProperty(e)&&b.indexOf(e)<0)return!1;return!0},b={};b.Bytes={},b.Bytes.createEncoder=function(){return function(a){var b;return b=a,{__type:"Bytes",base64:b}}},b.Bytes.createDecoder=function(){var b=function(b){return a(b,["__type","base64"])&&"Bytes"===b.__type};return function(a){if("object"!=typeof a||!b(a))throw new Error("Expecting Bytes object but got "+(angular.isArray(a)?"array":typeof a));return a.base64}},b.Date={},b.Date.createEncoder=function(){return function(a){var b;return b=a.toISOString(),{__type:"Date",iso:b}}},b.Date.createDecoder=function(){var b=function(b){return a(b,["__type","iso"])&&"Date"===b.__type};return function(a){if("object"!=typeof a||!b(a))throw new Error("Expecting Parse Date object but got "+(angular.isArray(a)?"array":typeof a));var c=a.iso;return new Date(c)}},b.File={},b.GeoPoint={},b.Pointer={},b.Pointer.createEncoder=function(a){var b=a.className;if(!b)throw new Error("Must provide a className for Pointers");return function(a){var c;return angular.isString(a)?c=a:angular.isObject(a)&&(c=a.objectId),{__type:"Pointer",className:b,objectId:c}}},b.Pointer.createDecoder=function(b){var c=b.className,d=function(b){return a(b,["__type","className","objectId"])&&"Pointer"===b.__type};if(!c)throw new Error("Must provide a className for Pointers");return function(a){if(!d(a))throw new Error("Expecting Pointer object but got "+(angular.isArray(a)?"array":typeof a));return a.objectId}},b.Relation={},b.Relation.createEncoder=function(a){var b=a.className;if(!b)throw new Error("Must provide a className for Relations");return function(){return{__type:"Relation",className:b}}},b.Relation.createDecoder=function(b){var c=b.className,d=function(b){return a(b,["__type","className"])&&"Relation"===b.__type};if(!c)throw new Error("Must provide a className for Relations");return function(a){if(!d(a))throw new Error("Expecting Relation object but got "+(angular.isArray(a)?"array":typeof a));if(a.className!==c)throw new Error("Expecting Relation with className of "+c+" but got one with className of "+a.className);return a}};var c=function(){return function(a){return a}},d={};return d.getEncoderForType=function(a,d){var e=b[a]||{},f=e.createEncoder||c;return f(d)},d.getDecoderForType=function(a,d){var e=b[a]||{},f=e.createDecoder||c;return f(d)},d}),angular.module("angularParseInterface").factory("parseDataEncoding",["parseDataCodecs",function(a){"use strict";var b=function(a){return a[0].toUpperCase()+a.slice(1)},c=function(a){var b,c,d,e;if(b=arguments[1]instanceof Array?arguments[1]:[].slice.call(arguments,1),null===a||"object"!=typeof a)return!1;for(c=0,d=b.length;d>c;c++)if(!a.hasOwnProperty(b[c]))return!1;for(e in a)if(a.hasOwnProperty(e)&&b.indexOf(e)<0)return!1;return!0},d=function(a){return c(a,["__type","iso"])&&"Date"===a.__type},e={};return e.getTransformFunctions=function(){var c,e=function(a){return c._getFieldClassName(a)},f=function(a,d){var e=c._getFieldDataType(a)||angular.isArray(d)&&"Array"||d instanceof Date&&"Date"||null===d&&"Null"||typeof d;return b(e)},g=function(b,c){var d,g,h;return d=f(b,c),g={className:e(b)},(h=a.getEncoderForType(d,g))(c)},h=function(a){var b,c;c={};for(b in a)a.hasOwnProperty(b)&&"function"!=typeof a[b]&&(c[b]=g(b,a[b]));return c},i=function(a,e){var f=c._getFieldDataType(a)||angular.isArray(e)&&"Array"||d(e)&&"Date"||null===e&&"Null"||typeof e;return b(f)},j=function(b,c){var d,f,g;return d=i(b,c),f={className:e(b)},(g=a.getDecoderForType(d,f))(c)},k=function(a){var b,c;c={};for(b in a)a.hasOwnProperty(b)&&"function"!=typeof a[b]&&(c[b]=j(b,a[b]));return c};return{transformRequest:function(a){return h(a)},transformResponse:function(a){var b;return angular.isArray(a)?(b=[],angular.forEach(a,function(a){b.push(k(a))})):b=k(a),b},setResource:function(a){c=a}}},e}]),angular.module("angularParseInterface").factory("parseRequestHeaders",["SIGN_IN","SIGN_OUT",function(a,b){"use strict";var c={};return c.getTransformRequest=function(c,d,e){var f=c.applicationId,g=c.restKey;return e.on(a,function(a,b){d.sessionToken=b.sessionToken}),e.on(b,function(){delete d.sessionToken}),function(a,b){var c=b(),e=d.sessionToken;return c["X-Parse-Application-Id"]=f,c["X-Parse-REST-API-Key"]=g,e&&e.length&&(c["X-Parse-Session-Token"]=e),a}},c}]),angular.module("angularParseInterface").factory("parseResource",["$resource","parseRequestHeaders","parseDataEncoding","parseResourceDecorator",function(a,b,c,d){"use strict";var e={};return e.createAppResourceFactory=function(a,b,c){var e=this.createCoreAppResourceFactory(a,b,c);return function(a,b,c){var f,g={};return angular.forEach(c,function(a){angular.extend(g,a.actions)}),f=e(a,b,g),angular.forEach(c,function(a){angular.isFunction(a.decorator)&&a.decorator(f)}),angular.forEach(f,function(a,b){var d=function(a){return f.hasOwnProperty(a)&&f.prototype.hasOwnProperty("$"+a)};d(b)&&!c[b]&&(delete f[b],delete f.prototype["$"+b])}),d(f),f}},e.createCoreAppResourceFactory=function(d,e,f){var g=function(a){var b=["POST","PUT"];return b.indexOf(a.method)>=0},h=function(a){return angular.isString(a)||(a=angular.toJson(a)),a},i=function(a){return angular.isString(a)&&(a=angular.fromJson(a)),a},j=b.getTransformRequest(d,e,f);return function(b,d,e){var f,k,l,m="https://api.parse.com/1",n=function(a){return m.replace(/\/+$/,"")+"/"+a.replace(/^\/+/,"")},o=c.getTransformFunctions(),p=function(a){var b;a.transformRequest?angular.isFunction(a.transformRequest)&&(a.transformRequest=[a.transformRequest]):a.transformRequest=[],b=a.transformRequest,g(a)&&(b.length&&b.push(i),b.push(o.transformRequest),b.push(h)),b.push(j)},q=function(a){var b;a.transformResponse?angular.isFunction(a.transformResponse)&&(a.transformResponse=[a.transformResponse]):a.transformResponse=[],b=a.transformResponse,b.unshift(o.transformResponse),b.unshift(i)};return b=n(b),d=d||{},e=e||{},f={get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}},k=angular.extend(f,e),angular.forEach(k,function(a){p(a),q(a)}),l=a(b,d,k),o.setResource(l),angular.forEach(k,function(a){a.setResource&&a.setResource(l)}),l}},e}]),angular.module("angularParseInterface").factory("parseResourceActions",function(){"use strict";var a={},b=function(a,b){for(var c=0,d=a.length;d>c;c++)if(b(a[c]))return a[c]},c=function(a,b){for(var c=a.length-1;c>=0;c--)if(b(a[c]))return a[c]},d=function(a,b){return angular.forEach(b,function(c,d){a[d]=a[d]||b[d]}),a},e=function(a){var b={};return angular.forEach(a,function(a,c){angular.isFunction(a)||(b[c]=a)}),b};return a.get={actions:{get:{method:"GET"}}},a.delete={actions:{"delete":{method:"DELETE"}}},a.POST={actions:{POST:{method:"POST"}},decorator:function(a){delete a.prototype.$POST}},a.PUT={actions:{PUT:{method:"PUT"}},decorator:function(a){a.PUT=function(){var b=a.PUT;return b}(),a.prototype.$PUT=function(b,c,d){var e={objectId:this.objectId};return a.PUT(e,b,c,d)}}},a.query={actions:{query:function(){var a;return{method:"GET",isArray:!0,transformResponse:function(b){var c=b.results;return c?angular.forEach(c,function(b,c,d){d[c]=new a(b)}):[]},setResource:function(b){a=b}}}(),count:{method:"GET",isArray:!1,transformResponse:function(a){return{count:a.count}}}},decorator:function(a){a.query=function(){var b=a.query,c=a.count;return delete a.count,delete a.prototype.$count,delete a.prototype.$query,function(){var a,d,e;return a=angular.isObject(arguments[0])?arguments[0]:{},d=angular.equals(a.count,1),e=d?c:b,e.apply(this,arguments)}}()}},a.save={actions:{save:{method:"POST"},create:{method:"POST"},update:{method:"PUT"}},decorator:function(a){a.save=function(){var f=a.create,g=a.update;return delete a.create,delete a.update,delete a.prototype.$create,delete a.prototype.$update,function(){var h,i,j,k,l,m,n,o,p,q,r;return h=[].slice.call(arguments),i=b(h,angular.isObject),j=c(h,angular.isObject),i===j&&(i={}),k=j instanceof a?j:new a(j),l=e(k),m=b(h,angular.isFunction)||angular.noop,n=function(a,b){d(a,l),m(a,b)},o=c(h,angular.isFunction)||angular.noop,o=o===m?angular.noop:o,p=function(a){angular.extend(k,l),o(a)},q=!k.objectId,r=q?f:g,r.call(this,i,k,n,p)}}()}},a}),angular.module("angularParseInterface").factory("parseResourceDecorator",["$log",function(a){"use strict";return function(b){b._getMetaData=function(){return this._metaData||{}},b._setMetaData=function(a){this._metaData=a},b._getMetaDataProp=function(a){var b=this._getMetaData();return b[a]},b._setMetaDataProp=function(a,b){var c=this._getMetaData();c[a]=b,this._setMetaData(c)};var c=function(d){b._setMetaDataProp("className",d),c=function(c){var d=b._getMetaDataProp("className"),e="You are renaming the Parse Object class "+d+" to "+c;b._setMetaDataProp("className",c),a.warn(e)}};Object.defineProperty(b,"className",{enumerable:!0,configurable:!1,get:function(){return this._getMetaDataProp("className")},set:function(a){c(a)}}),b._getFieldsMetaData=function(){return this._getMetaDataProp("fields")||{}},b._setFieldsMetaData=function(a){this._setMetaDataProp("fields",a)},b._getFieldMetaData=function(a){var b=this._getFieldsMetaData();return b[a]||{}},b._setFieldMetaData=function(a,b){var c=this._getFieldsMetaData();c[a]=b,this._setFieldsMetaData(c)},b._getFieldMetaDataProp=function(a,b){var c=this._getFieldMetaData(a);return c[b]},b._setFieldMetaDataProp=function(a,b,c){var d=this._getFieldMetaData(a);d[b]=c,this._setFieldMetaData(a,d)},b._getFieldDataType=function(a){return this._getFieldMetaDataProp(a,"dataType")},b._setFieldDataType=function(a,b){this._setFieldMetaDataProp(a,"dataType",b)},b._getFieldClassName=function(a){return this._getFieldMetaDataProp(a,"className")},b._setFieldClassName=function(a,b){this._setFieldMetaDataProp(a,"className",b)},b._addRequestBlacklistProp=function(a){this._setFieldMetaDataProp(a,"isRequestBlacklisted",!0)},b._addRequestBlacklistProps=function(){var a=angular.isArray(arguments[0])?arguments[0]:[].slice.call(arguments),b=this,c=function(a){b._addRequestBlacklistProp(a)};angular.forEach(a,c)},b._isRequestBlacklisted=function(a){return!!this._getFieldMetaDataProp(a,"isRequestBlacklisted")},b._addRequestBlacklistProps("createdAt","updatedAt"),b.prototype.isNew=function(){return!this.objectId},Object.defineProperty(b.prototype,"className",{enumerable:!0,configurable:!1,get:function(){return this.constructor.className},set:function(){}})}}]);